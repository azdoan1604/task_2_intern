const createMigration =(filename)=>{
    const fs = require("fs")
    const path = require("path")
    let dir = path.resolve('migration')

    if (!fs.existsSync(dir)){
        fs.mkdirSync(dir);
    }

    let content = fs.readFileSync(path.resolve(__dirname + "/file/create"))

    fs.writeFileSync(dir+"/"+filename+".js", content, function (err) {
        if (err) throw err;
    });
    console.log('Migration is created successfully.');
    if(!fs.existsSync(dir+"/refresh.js")){
        let content = fs.readFileSync(path.resolve(__dirname + "/file/refresh"))
        fs.writeFileSync(dir+"/refresh.js", content, function (err) {
            if (err) throw err;            
        });
        console.log('Migration refresh is created successfully.');
    }
}

module.exports = createMigration