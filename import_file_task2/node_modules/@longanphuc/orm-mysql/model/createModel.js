const createModel = (model,primary,properties)=>{
    const fs = require("fs")
    const path = require("path")
    
    let filename = model
    let dir = path.resolve('Model')
    if(fs.existsSync(dir+"/"+filename+".js")) return
    if (!fs.existsSync(dir)){
        fs.mkdirSync(dir);
    }

    let content = fs.readFileSync(path.resolve(__dirname + "/model")).toString()

    content = content.replace(/{model}/g,filename)

    if(primary !== undefined){        
        primary.forEach((e,i)=> {
            primary[i] = '"'+e+'"'
        });
        let primaryKey = "[" + primary.join(",") +"]"
        content = content.replace(/{primaryKey}/g,primaryKey)
    }   
    
    if(properties !==undefined){
        let pcontent = ""
        properties.forEach((e)=>{
            pcontent+= "\t\tthis."+e+"=undefined;\n"
        })
        content = content.replace(/{properties}/g,pcontent)
    }
    
    fs.writeFileSync(dir+"/"+filename+".js", content, function (err) {
        if (err) console.log(err);
    });
    console.log('Model is created successfully.');
}
module.exports = createModel
